(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const L=(e,t)=>{let n;return function(...s){clearTimeout(n),n=setTimeout(()=>{e instanceof Function&&e(...s)},t)}},g=async e=>{console.log(e);const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},redirect:"follow"});if(t.ok)return t.json();throw new Error("Something went wrong :(")},y=e=>{e.classList.remove("show")},p="https://api.punkapi.com/v2/beers",S=10,_=async e=>g(`${p}?beer_name=${e}&per_page=${S}`),v=async e=>g(`${p}?ids=${e}&per_page=1`),f="visited",w=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch{localStorage.removeItem(e)}},T=e=>{const t=localStorage.getItem(e);if(t!==null)try{return JSON.parse(t)}catch{return[]}return[]},E=e=>{w(f,e)},l=()=>T(f),d=document.querySelector("#search"),i=document.querySelector(".suggests"),a=document.querySelector(".result"),m=document.querySelector(".history__items"),u=e=>{m.innerHTML="";for(let t=0;t<Math.min(3,e.length);t++){const n=e[t],s=document.createElement("div");s.classList.add("history__item"),s.innerText=n.name,m.append(s)}},b=e=>{if(!a)return;a.classList.add("show"),a.innerHTML="";const t=document.createElement("h2");t.classList.add("result__title"),t.innerText=e.name,a.append(t);const n=document.createElement("div");n.classList.add("result__item");const s=document.createElement("img");s.classList.add("result__image"),s.setAttribute("src",e.image_url||""),n.append(s);const r=document.createElement("p");r.innerText=e.description,r.classList.add("result__description"),n.append(r),a.append(n)},I=async()=>{if(!d||!i)return;if(d.value===""){y(a);return}i.classList.contains("show")||i.classList.add("show"),i.innerHTML="",i.innerText="Loading...";let e=[];try{e=await _(d.value)}catch{i.innerText="Something went wrong :(";return}i.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.setAttribute("data-id",t.id.toString()),n.classList.add("suggests__item"),n.innerText=t.name,i==null||i.append(n)}),e.length===0&&(i.innerText="No data to display :(")};d.addEventListener("keyup",L(I,400));i.addEventListener("click",async e=>{const t=e.target;if(t&&t.classList.contains("suggests__item")){const n=t.textContent,s=t.getAttribute("data-id");if(!s)return;const r=await v(s);console.log(r[0]),b(r[0]);const o=l(),c=o.findIndex(h=>h.name===n);console.log(c),c>-1&&o.splice(c,1),o.unshift({name:n,id:s}),u(o),E(o)}});window.addEventListener("storage",()=>{const e=l();u(e)});window.addEventListener("DOMContentLoaded",()=>{u(l())});
